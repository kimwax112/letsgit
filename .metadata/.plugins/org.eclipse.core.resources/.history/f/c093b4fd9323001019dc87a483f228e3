<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.Loginpj.mapper.ContractMapper">
  
  <select id="selectAllContracts" resultType="com.example.Loginpj.model.Contract">
    SELECT 
      contract_id AS contractId,
      request_id AS requestId,
      designer_id AS designerId,
      TO_CHAR(due_date, 'YYYY-MM-DD') AS dueDate,
      request_fee AS requestFee,
      status,
      client_id AS clientId,
      contract_title AS contractTitle
    FROM contract
  </select>

  <select id="selectContractById" resultType="com.example.Loginpj.model.Contract">
    SELECT 
      contract_id AS contractId,
      request_id AS requestId,
      designer_id AS designerId,
      TO_CHAR(due_date, 'YYYY-MM-DD') AS dueDate,
      request_fee AS requestFee,
      status,
      client_id AS clientId,
      contract_title AS contractTitle
    FROM contract
    WHERE contract_id = #{id}
  </select>
  
  <update id="updateStarStatus">
    UPDATE contract SET is_starred = #{isStarred} WHERE id = #{id};
</update>
  
  <insert id="insertContract" parameterType="com.example.Loginpj.model.Contract">
    INSERT INTO contract (
      contract_id,
      request_id,
      designer_id,
      due_date,
      request_fee,
      status,
      client_id,
      contract_title,
      starred_status
    ) VALUES (
      CONTRACT_SEQ.NEXTVAL,
      #{requestId},
      #{designerId},
      #{dueDate, jdbcType=DATE},
      #{requestFee},
      #{status},
      #{clientId},
      #{contractTitle},
      #{starredStatus}
    )
    </insert>
</mapper>
